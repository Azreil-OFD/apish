# Создание API для сокращения ссылок

Если какой то из прошлых статей вызвал у вас проблемы
то скачайте заготовку.

ссылка на заготовку: https://codeload.github.com/Azreil-OFD/apish/zip/refs/tags/v1

После чего в папке с заготовокой введите `npm i`

## Получение ссылки для сокращения

Реализуем роут для получения длинной ссылки из query параметра:

```js
app.get("/api", async (req, res) => {
    const { link } = req.query;
    const hash = hashUrl(link);
    // сохраняем ссылку в базу
});
```

Обращаемся к нему так:

```
/api?link=http://google.com
```

## Возврат сокращенной ссылки

Возвращаем сгенерированную короткую ссылку:

```js
res.json({
    url: `${req.hostname}/${hash}`,
});
```

Например:

```
localhost:3000/abc123
```

## Редирект по хешу

Роут для редиректа остаётся прежним:

```js
app.get("/:hash", async (req, res) => {
    const { hash } = req.query;

    // находим в базе url по hash и делаем редирект
});
```
